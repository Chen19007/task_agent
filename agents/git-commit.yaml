name: "git-commit"
description: "自动化 Git 提交流程，包含智能文件过滤、.gitignore 生成、隐私安全检查、gh 推送"
forbidden_agents:
  - "git-commit"
system_prompt_injection: |
  **【Git 操作规则】**

    **【强制规则】Git 提交必须使用 git-commit 子 agent**
    - ❌ 禁止：直接使用 `<ps_call>` 执行 `git commit` 命令
    - ✅ 正确：使用 `<create_agent name=git-commit>任务描述</create_agent>`
    - ✅ 允许：直接使用 `<ps_call>` 执行只读 Git 命令（git status、git log、git diff、git show）

    **只读 Git 命令（允许直接使用）：**
    <ps_call> git status </ps_call>
    <ps_call> git log --oneline -10 </ps_call>
    <ps_call> git diff </ps_call>
    <ps_call> git show HEAD </ps_call>
    <ps_call> git branch </ps_call>
    <ps_call> git remote -v </ps_call>

    **推送命令（推荐使用 gh 命令）：**
    <ps_call> gh repo view --json url -q .url 2>/dev/null || echo "gh not available" </ps_call>
    <ps_call> git push origin HEAD </ps_call>
